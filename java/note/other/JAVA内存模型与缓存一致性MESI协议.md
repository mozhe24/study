摘自：`https://www.zhihu.com/question/268021813`



MESI协议 ，是一个缓存一致性协议。MESI协议保证了每个缓存中使用的共享变量的副本是一致的。

JMM，包括其中的volatile，synchronized等关键字，解决的是内存一致性问题。

**注意，一个是缓存一致性，一个是内存一致性。**

**缓存一致性（Cache Coherence）**，硬件层面的问题，指的是由于多核计算机中有多套缓存，各个缓存之间的数据不一致性问题。缓存一致性协议，如MESI解决是多个缓存副本之间的数据的一致性问题。

**内存一致性（Memory Consistency）**，保证的是多线程程序访问内存时可以读到什么值。就是保证并发场景下的程序运行结果和程序员预期是一样的（当然，要通过加锁等方式），包括的就是并发编程中的原子性、有序性和可见性。

Java多线程中，每个线程都有自己的工作内存，需要和主存进行交互。这里的工作内存和计算机硬件的缓存并不是一回事儿，只是可以相互类比。所以，并发编程的可见性问题，是因为各个线程之间的本地内存数据不一致导致的，和计算机缓存并无关系。

**缓存一致性协议**。用来解决缓存一致性问题的，常用的是MESI协议。

**内存一致性模型**。屏蔽计算机硬件问题，主要来解决并发编程中的原子性、有序性和一致性问题。

**实现内存一致性模型的时候可能会用到缓存一致性模型。**